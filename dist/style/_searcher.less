@import '_variables';
@import '_mixins';

@a:      1;

/////////////////////////////
//         searcher        //
/////////////////////////////

@entryHeight:    @luna-superline-height * 1px; // calc(@ui ~'*' @luna-superline-height * 1px);
@borderRadius:   (@luna-searcher-border-radius + @luna-connection-width) * 1px;
@searcherWidth:  400px;
@searcherHeight: 11 * @entryHeight;
@searcherCenterOffset: -10 * @entryHeight / 2;


.luna-studio-window--has-searcher {
    .luna-studio-window__center {
        z-index: @luna-zindex-searcher;
    }
}

.luna-searcher__root {
    width:  @searcherWidth;
    height: @searcherHeight;
    position: absolute;
}

.luna-searcher__container {
    z-index:  @luna-zindex-searcher;
    width:  @searcherWidth;
    height: @searcherHeight;
    position: relative;
    transform: translateY(@searcherCenterOffset);
}

.luna-searcher__input {
    background:     #1d1d19;
    border-radius:  0px 0px @borderRadius @borderRadius;
    color:          @luna-syntax-text-color;
    font-family:    @fontDefault;
    font-size:      calc(@ui ~'*' 12px);
    font-weight:    300;
    height:         @entryHeight;
    line-height:    @entryHeight;
    letter-spacing: 0.5px; // Matching Atom styles. TODO: Apply to the whole graph?
    overflow:       inherit;
    position:       absolute;
    bottom:         0px;
    text-align:     center;
    width:          @searcherWidth;
    &:focus {
        outline: 0;
    }
}

.luna-searcher__no-results {
    border-radius: @borderRadius;
}

.luna-searcher__input--selected {
    .background(@a+1) !important;
}

.luna-searcher__results {
    display:        flex;
    flex-direction: column-reverse;
    bottom:         @entryHeight;
    position:       absolute;
    width:          @searcherWidth;
    height:         10 * @entryHeight;
    overflow:       hidden;
    // NOTE: there used to be a (transparent) border around the results.
    // however, it adds padding between the results and the input,
    // which in my opinion doesn't look well. If you want it back, uncomment:
    // border: unit(@luna-connection-width, px) solid transparent;
}

.luna-searcher__results__list {
    .background(@a);
    overflow:       hidden;
    display:        flex;   
    flex-direction: column-reverse;
    text-align:     center;
    border-radius:  unit(@luna-searcher-border-radius,px) unit(@luna-searcher-border-radius,px) 0 0;
    padding:        0;
    width:          @searcherWidth;
    max-height:     10 * @entryHeight;  
}

.luna-searcher__doc {
    @y: calc(@ui ~'*' @luna-superline-height * 10px);
    .background(@a);
    font-size:     calc(@ui ~'*' 10px);
    border-radius: unit(@luna-searcher-border-radius, px) 
                   unit(@luna-searcher-border-radius, px) 
                   unit(@luna-searcher-border-radius, px) 0 !important;
    box-sizing:    border-box;
    position:      absolute;
    bottom:        30px;
    left:          calc(@ui ~'*' @searcherWidth/4 + 2px);
    height:        @y;
    width:         calc(@ui ~'*' @searcherWidth/2);
    white-space:   normal;
    &.luna-visualization--active {
        .luna-visualization-container {
            .background(@a + 1);
        }
    }
    .luna-visualization-container {
        background: inherit !important;
        width:      200px;
    }
    iframe {
        width: 100%;
        height: @y;
    }
}

.luna-searcher__results__item {
    line-height: @entryHeight;
}

.luna-searcher__results__item--selected {
    .background(@a+1);
    .color(@a+5);
    .luna-searcher__hl {
        color: @luna-text-accent-color;
        opacity: 1;
    }
}

.luna-searcher__results__item::before {
    position: absolute;
    left:     calc(@ui ~'*' 7px);
    opacity:  .5;
}
.luna-searcher__results__item:nth-of-type(1)::before { content: "⌘1" }
.luna-searcher__results__item:nth-of-type(2)::before { content: "⌘2" }
.luna-searcher__results__item:nth-of-type(3)::before { content: "⌘3" }
.luna-searcher__results__item:nth-of-type(4)::before { content: "⌘4" }
.luna-searcher__results__item:nth-of-type(5)::before { content: "⌘5" }
.luna-searcher__results__item:nth-of-type(6)::before { content: "⌘6" }
.luna-searcher__results__item:nth-of-type(7)::before { content: "⌘7" }
.luna-searcher__results__item:nth-of-type(8)::before { content: "⌘8" }
.luna-searcher__results__item:nth-of-type(9)::before { content: "⌘9" }
.luna-searcher__results__item:nth-of-type(10)::before{ content: "⌘0" }

.luna-searcher__pre,
.luna-searcher__pre + span {
    height:     calc(@ui ~'*' @luna-superline-height * 1px);
    display:    block;
    text-align: left;
    width:      50%;
    float:      left;
}
.luna-searcher__pre {
    opacity:    .5;
    text-align: right;
}
.luna-searcher__pre + span::before {
    content: ".";
    opacity: 0;
}
.luna-searcher__hl {
    color:   @luna-text-accent-color;
    opacity: 1;
}
